(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{525:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"bikes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"Bikes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"station_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isRented"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:112}};t.loc.source={body:"query bikes($id: uuid) {\r\n  Bikes(where: { station_id: { _eq: $id } }) {\r\n    id\r\n    name\r\n    isRented\r\n  }\r\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}var d={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),d[e.name.value]=n}})),e.exports=t,e.exports.bikes=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var r=d[n]||new Set,l=new Set,c=new Set;for(r.forEach((function(e){c.add(e)}));c.size>0;){var m=c;c=new Set,m.forEach((function(e){l.has(e)||(l.add(e),(d[e]||new Set).forEach((function(e){c.add(e)})))}))}return l.forEach((function(n){var r=o(e,n);r&&t.definitions.push(r)})),t}(t,"bikes")},563:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"rental"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bikeId"}},type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"update_Bikes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"bikeId"}}}]}}]}},{kind:"Argument",name:{kind:"Name",value:"_set"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"isRented"},value:{kind:"BooleanValue",value:!1}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"returning"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"insert_Rents"},arguments:[{kind:"Argument",name:{kind:"Name",value:"objects"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"bike_id"},value:{kind:"Variable",name:{kind:"Name",value:"bikeId"}}},{kind:"ObjectField",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"returning"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:267}};t.loc.source={body:"mutation rental($bikeId: uuid, $userId: uuid) {\r\n  update_Bikes(where: {id: {_eq: $bikeId}}, _set: {isRented: false}) {\r\n    returning {\r\n      id\r\n    }\r\n  }\r\n  insert_Rents(objects: {bike_id: $bikeId, user_id: $userId}) {\r\n    returning {\r\n      id\r\n    }\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}var d={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),d[e.name.value]=n}})),e.exports=t,e.exports.rental=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var r=d[n]||new Set,l=new Set,c=new Set;for(r.forEach((function(e){c.add(e)}));c.size>0;){var m=c;c=new Set,m.forEach((function(e){l.has(e)||(l.add(e),(d[e]||new Set).forEach((function(e){c.add(e)})))}))}return l.forEach((function(n){var r=o(e,n);r&&t.definitions.push(r)})),t}(t,"rental")},564:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"subscription",variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"Bikes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isRented"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:65}};t.loc.source={body:"subscription {\r\n  Bikes {\r\n    id\r\n    name\r\n    isRented\r\n  }\r\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}var d={};t.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),d[e.name.value]=n}})),e.exports=t},590:function(e,n,t){"use strict";t.r(n);var r=t(28),d=t(153),o=(t(76),t(38),t(525)),l=t.n(o),c=t(282),m=t.n(c),k=t(563),v=t.n(k),f=t(564),h=t.n(f),S={name:"BikesPage",middleware:"authenticated",apollo:{Bikes:{query:l.a,prefetch:function(e){return{id:e.route.params.id}},variables:function(){return{id:this.$route.params.id}},subscribeToMore:{document:h.a,updateQuery:function(e,n){var t=n.subscriptionData;return{Bikes:[].concat(Object(d.a)(e.Bikes),[t.data.subBikes])}}}},Users:{query:m.a,prefetch:function(e){return{username:e.store.state.auth.username}},variables:function(){return{username:this.userState}}}},computed:{userState:function(){return this.$store.getters.isLoggedIn?this.$store.state.auth.username:null}},methods:{rent:function(e,n){var t=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$apollo.mutate({mutation:v.a,variables:{bikeId:e,userId:n}});case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),console.log(r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()}}},N=t(44),w=t(149),_=t.n(w),y=t(324),V=t(580),F=t(521),O=t(517),D=t(582),component=Object(N.a)(S,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[t("h1",[e._v("Bikes ready to use")])])],1),e._v(" "),t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12",xl:"12"}},[t("v-main",e._l(e.Bikes,(function(n){return t("section",{key:n.id},[e._v("\n          "+e._s(n.name)+"\n          "),n.isRented?t("section",e._l(e.Users,(function(r){return t("section",{key:r.id},[t("v-btn",{on:{click:function(t){return e.rent(n.id,r.id)}}},[e._v(" Rent ")])],1)})),0):t("section",[t("v-btn",[e._v(" Rented ")])],1)])})),0)],1)],1)],1)}),[],!1,null,null,null);n.default=component.exports;_()(component,{VBtn:y.a,VCol:V.a,VContainer:F.a,VMain:O.a,VRow:D.a})}}]);